{% extends 'base.html' %}
{% load static %}

{% block title %}Tableau de Bord Syndic{% endblock %}

{% block content %}
<!-- ===== EN-TÊTE DE PAGE ===== -->
{% include 'components/page_header.html' with title="Tableau de Bord Syndic" subtitle="Vue d'ensemble" icon="fas fa-tachometer-alt" %}

<div class="container">
    <!-- ===== MÉTRIQUES PRINCIPALES ===== -->
    <section class="metrics-section mb-4">
        <div class="row">
            <div class="col-md-6 mb-4">
                {% include 'components/stats_card.html' with value=total_residents label="Total Résidents" icon="fas fa-users" color="primary" %}
            </div>
            <div class="col-md-6 mb-4">
                {% include 'components/stats_card.html' with value=total_due|floatformat:0 label="Montants Dus (DH)" icon="fas fa-exclamation-triangle" color="warning" %}
            </div>
        </div>
    </section>

    <!-- ===== ACTIONS RAPIDES ===== -->
    <section class="quick-actions-section mb-4">
        <div class="row">
            {% include 'components/quick_action.html' with url='finance:document_create' icon='fas fa-file-plus' icon_class='bg-primary' title='Document' description='Créer facture' %}
            {% include 'components/quick_action.html' with url='finance:overdue_dashboard' icon='fas fa-exclamation-triangle' icon_class='bg-danger' title='Impayés' description='Gérer' %}
        </div>
    </section>

    <!-- ===== ALERTES IMPORTANTES ===== -->
    {% if critical or overdue %}
    <section class="alerts-section">
        <div class="alert-modern alert-warning">
            <div class="d-flex align-items-center">
                <i class="fas fa-exclamation-triangle me-3"></i>
                <div class="flex-grow-1">
                    <p class="mb-0">
                        {% if critical %}{{ critical|length }} situation(s) critique(s){% endif %}
                        {% if critical and overdue %} et {% endif %}
                        {% if overdue %}{{ overdue|length }} résident(s) en retard{% endif %}
                    </p>
                </div>
                <a href="{% url 'finance:overdue_dashboard' %}" class="btn-modern btn-warning btn-sm">
                    <i class="fas fa-eye"></i>Voir
                </a>
            </div>
        </div>
    </section>
    {% endif %}
</div>
{% endblock %}